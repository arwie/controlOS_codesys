// SPDX-FileCopyrightText: 2025 Artur Wiebe <artur@4wiebe.de>
// SPDX-License-Identifier: MIT

PROGRAM app

VAR_OUTPUT
	cfg: AppCfg;
	cmd: AppCmd;
END_VAR
VAR_INPUT
	fbk: AppFbk;
END_VAR

VAR CONSTANT
	CFG_FILE: STRING := '/run/codesys/cfg';
END_VAR
VAR
	shm: RTS_IEC_HANDLE;
	sem: RTS_IEC_HANDLE;
	iec_result: RTS_IEC_RESULT;
	conflicts: UDINT := 0;
END_VAR

////////////////////////////////

sync();

IF init.done THEN
	main();
ELSE
	init();
END_IF

sync();